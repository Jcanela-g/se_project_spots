!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=(e,t,o)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.remove(o.inputErrorClass),n.textContent=""},o=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?n(t,o):(t.classList.remove(o.inactiveButtonClass),t.disabled=!1)},n=(e,t)=>{e.classList.add(t.inactiveButtonClass),e.disabled=!0},r=document.querySelector(".profile__edit-btn"),a=document.querySelector(".profile__new-btn"),c=document.querySelector(".profile__name"),s=document.querySelector(".profile__description"),l=document.querySelector("#edit-modal"),i=document.querySelector("#new-post-modal"),u=document.querySelector("#preview-modal"),m=u.querySelector(".modal__image"),d=u.querySelector(".modal__caption"),p=l.querySelector("#profile-name-input"),_=l.querySelector("#profile-description-input"),y=i.querySelector("#img-link-input"),f=i.querySelector("#img-caption-input"),v=l.querySelector(".modal__form"),S=i.querySelector(".modal__form"),g=document.querySelector("#card-template"),q=document.querySelector(".gallery__cards");function b(e){const t=g.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__description"),n=t.querySelector(".card__image"),r=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return o.textContent=e.name,n.src=e.link,n.alt=e.name,r.addEventListener("click",(()=>{r.classList.toggle("card__like-btn_liked")})),a.addEventListener("click",(()=>{t.remove()})),n.addEventListener("click",(()=>{k(u),m.src=e.link,d.textContent=e.name,m.alt=e.name})),t}function h(e){"Escape"===e.key&&E(document.querySelector(".modal_open"))}function w(e){e.target.classList.contains("modal_open")&&E(e.target)}function k(e){e.classList.add("modal_open"),e.addEventListener("mousedown",w),document.addEventListener("keyup",h)}function E(e){e.classList.remove("modal_open"),e.removeEventListener("mousedown",w),document.removeEventListener("keyup",h)}function L(t){const o=t.target.querySelector(".modal__submit-btn");n(o,e)}var C;document.querySelectorAll(".modal__close-btn").forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>E(t)))})),r.addEventListener("click",(()=>{var o,n;p.value=c.textContent,_.value=s.textContent,o=v,n=e,Array.from(o.querySelectorAll(n.inputSelector)).forEach((e=>{t(o,e,n)})),k(l)})),a.addEventListener("click",(()=>{k(i)})),v.addEventListener("submit",(function(e){c.textContent=p.value,s.textContent=_.value,L(e),E(l),e.preventDefault()})),S.addEventListener("submit",(function(e){e.preventDefault();const t=b({name:f.value,link:y.value});q.prepend(t),L(e),E(i),e.target.reset()})),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach((e=>{const t=b(e);q.prepend(t)})),C=e,document.querySelectorAll(C.formSelector).forEach((e=>{((e,n)=>{const r=Array.from(e.querySelectorAll(n.inputSelector)),a=e.querySelector(n.submitButtonSelector);o(r,a,n),r.forEach((c=>{c.addEventListener("input",(function(){((e,o,n)=>{o.validity.valid?t(e,o,n):((e,t,o,n)=>{const r=e.querySelector(`#${t.id}-error`);t.classList.add(n.inputErrorClass),r.textContent=o})(e,o,o.validationMessage,n)})(e,c,n),o(r,a,n)}))}))})(e,C)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNLDJIQUVSLENBQ0VGLEtBQU0scUJBQ05FLEtBQU0sbUhBRVIsQ0FDRUYsS0FBTSxrQkFDTkUsS0FBTSx5SEFFUixDQUNFRixLQUFNLDREQUNORSxLQUFNLDJIQUVSLENBQ0VGLEtBQU0sNEJBQ05FLEtBQU0sMEhBRVIsQ0FDRUYsS0FBTSxpQkFDTkUsS0FBTSw0SEFzSUdnQixTQUFTVyxJQUNwQixNQUFNcEMsRUFBY0YsRUFBZXNDLEdBQ25DdkMsRUFBVXFDLFFBQVFsQyxFQUFZLElENUZOckMsRUMrRlRWLEVEOUZFNEIsU0FBUzJDLGlCQUFpQjdELEVBQU9ULGNBQ3pDdUUsU0FBU2hFLElBaEJLNEUsRUFBQzVFLEVBQVFFLEtBQ2hDLE1BQU1RLEVBQVk0RCxNQUFNQyxLQUFLdkUsRUFBTytELGlCQUFpQjdELEVBQU9SLGdCQUN0RGlCLEVBQWdCWCxFQUFPSSxjQUFjRixFQUFPUCxzQkFFbERjLEVBQWtCQyxFQUFXQyxFQUFlVCxHQUU1Q1EsRUFBVXNELFNBQVMvRCxJQUNqQkEsRUFBYWlELGlCQUFpQixTQUFTLFdBL0NoQjJCLEVBQUM3RSxFQUFRQyxFQUFjQyxLQUMzQ0QsRUFBYWEsU0FBU0MsTUFRekJoQixFQUFlQyxFQUFRQyxFQUFjQyxHQXJCbEI0RSxFQUFDOUUsRUFBUUMsRUFBYzhFLEVBQVU3RSxLQUN0RCxNQUFNQyxFQUFhSCxFQUFPSSxjQUFjLElBQUlILEVBQWFJLFlBQ3pESixFQUFhSyxVQUFVWSxJQUFJaEIsRUFBT0wsaUJBQ2xDTSxFQUFXSyxZQUFjdUUsQ0FBUSxFQVcvQkQsQ0FDRTlFLEVBQ0FDLEVBQ0FBLEVBQWErRSxrQkFDYjlFLEVBSUosRUFzQ0kyRSxDQUFtQjdFLEVBQVFDLEVBQWNDLEdBQ3pDTyxFQUFrQkMsRUFBV0MsRUFBZVQsRUFDOUMsR0FBRSxHQUNGLEVBTUEwRSxDQUFpQjVFLEVBQVFFLEVBQU8sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnRuX2luYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWxlbWVudCwgZXJyb3JNc2csIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yTXNnRWwudGV4dENvbnRlbnQgPSBlcnJvck1zZztcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gXCJcIjtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWwsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoXG4gICAgICBmb3JtRWwsXG4gICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsXG4gICAgICBjb25maWdcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICB9XG59O1xuXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0LCBjb25maWcpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59O1xuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gIH1cbn07XG5cbmNvbnN0IGRpc2FibGVCdXR0b24gPSAoYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xufTtcblxuY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICB9KTtcbn07XG5cbmNvbnN0IHNldEV2ZW50TGlzdG5lcnMgPSAoZm9ybUVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG5cbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsKSA9PiB7XG4gICAgc2V0RXZlbnRMaXN0bmVycyhmb3JtRWwsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuZXhwb3J0IHsgcmVzZXRWYWxpZGF0aW9uLCBlbmFibGVWYWxpZGF0aW9uLCBkaXNhYmxlQnV0dG9uLCBzZXR0aW5ncyB9O1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIHJlc2V0VmFsaWRhdGlvbixcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgZGlzYWJsZUJ1dHRvbixcbiAgc2V0dGluZ3MsXG59IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJWYWwgVGhvcmVuc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8xLXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUmVzdGF1cmFudCB0ZXJyYWNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzItcGhvdG8tYnktY2VpbGluZS1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQW4gb3V0ZG9vciBjYWZlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzMtcGhvdG8tYnktdHViYW51ci1kb2dhbi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQSB2ZXJ5IGxvbmcgYnJpZGdlLCBvdmVyIHRoZSBmb3Jlc3QgYW5kIHRocm91Z2ggdGhlIHRyZWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzYtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuXTtcblxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuY29uc3QgbmV3UG9zdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmV3LWJ0blwiKTtcblxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuXG5jb25zdCBlZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1tb2RhbFwiKTtcbmNvbnN0IG5ld1Bvc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1wb3N0LW1vZGFsXCIpO1xuY29uc3QgcHJldmlld0ltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbEltZ0VsZW1lbnQgPSBwcmV2aWV3SW1nLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuY29uc3QgcHJldmlld01vZGFsQ2FwdGlvbkVsZW1lbnQgPSBwcmV2aWV3SW1nLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5cbmNvbnN0IGVkaXROYW1lSW5wdXQgPSBlZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZS1pbnB1dFwiKTtcbmNvbnN0IGVkaXREZXNjcmlwdGlvbklucHV0ID0gZWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuY29uc3QgaW1nTGlua0lucHV0ID0gbmV3UG9zdC5xdWVyeVNlbGVjdG9yKFwiI2ltZy1saW5rLWlucHV0XCIpO1xuY29uc3QgY2FwdGlvbklucHV0ID0gbmV3UG9zdC5xdWVyeVNlbGVjdG9yKFwiI2ltZy1jYXB0aW9uLWlucHV0XCIpO1xuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IG5ld1Bvc3RGb3JtID0gbmV3UG9zdC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NhcmRzXCIpO1xuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICBjb25zdCBjYXJkTmFtZUVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2Rlc2NyaXB0aW9uXCIpO1xuICBjb25zdCBjYXJkSW1hZ2VFbGVtZW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgY29uc3QgY2FyZExpa2VCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xuICBjb25zdCBjYXJkRGVsZXRlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xuXG4gIGNhcmROYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgY2FyZEltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xuXG4gIGNhcmRMaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZExpa2VCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnRuX2xpa2VkXCIpO1xuICB9KTtcbiAgY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9KTtcbiAgY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3SW1nKTtcbiAgICBwcmV2aWV3TW9kYWxJbWdFbGVtZW50LnNyYyA9IGRhdGEubGluaztcbiAgICBwcmV2aWV3TW9kYWxDYXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICBwcmV2aWV3TW9kYWxJbWdFbGVtZW50LmFsdCA9IGRhdGEubmFtZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFc2NhcGUoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3QgYWN0aXZlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5cIik7XG4gICAgY2xvc2VNb2RhbChhY3RpdmVQb3B1cCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlT3ZlcmxheShldnQpIHtcbiAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlblwiKSkge1xuICAgIGNsb3NlTW9kYWwoZXZ0LnRhcmdldCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuXCIpO1xuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZU92ZXJsYXkpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgaGFuZGxlRXNjYXBlKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcbiAgbW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVPdmVybGF5KTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGhhbmRsZUVzY2FwZSk7XG59XG5cbi8vIEZpbmQgYWxsIGNsb3NlIGJ1dHRvbnNcbmNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcblxuY2xvc2VCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAvLyBGaW5kIHRoZSBjbG9zZXN0IHBvcHVwIG9ubHkgb25jZVxuICBjb25zdCBwb3B1cCA9IGJ1dHRvbi5jbG9zZXN0KFwiLm1vZGFsXCIpO1xuICAvLyBTZXQgdGhlIGxpc3RlbmVyXG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChwb3B1cCkpO1xufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEJ0bihldnQpIHtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGV2dC50YXJnZXQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcbiAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBzZXR0aW5ncyk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGVkaXROYW1lSW5wdXQudmFsdWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGVkaXREZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuXG4gIGhhbmRsZVN1Ym1pdEJ0bihldnQpO1xuXG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGUpO1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTmV3UG9zdEZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBpbnB1dFZhbHVlcyA9IHsgbmFtZTogY2FwdGlvbklucHV0LnZhbHVlLCBsaW5rOiBpbWdMaW5rSW5wdXQudmFsdWUgfTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpbnB1dFZhbHVlcyk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcblxuICBoYW5kbGVTdWJtaXRCdG4oZXZ0KTtcblxuICBjbG9zZU1vZGFsKG5ld1Bvc3QpO1xuICBldnQudGFyZ2V0LnJlc2V0KCk7XG59XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXROYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcbiAgZWRpdERlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XG4gIHJlc2V0VmFsaWRhdGlvbihlZGl0UHJvZmlsZUZvcm0sIHNldHRpbmdzKTtcbiAgb3Blbk1vZGFsKGVkaXRQcm9maWxlKTtcbn0pO1xuXG5uZXdQb3N0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG9wZW5Nb2RhbChuZXdQb3N0KTtcbn0pO1xuXG5lZGl0UHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5uZXdQb3N0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZU5ld1Bvc3RGb3JtU3VibWl0KTtcblxuaW5pdGlhbENhcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcbiAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xufSk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImZvcm1FbCIsImlucHV0RWxlbWVudCIsImNvbmZpZyIsImVycm9yTXNnRWwiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0ZXh0Q29udGVudCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsImhhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiYWRkIiwicHJvZmlsZUVkaXRCdXR0b24iLCJkb2N1bWVudCIsIm5ld1Bvc3RCdXR0b24iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsImVkaXRQcm9maWxlIiwibmV3UG9zdCIsInByZXZpZXdJbWciLCJwcmV2aWV3TW9kYWxJbWdFbGVtZW50IiwicHJldmlld01vZGFsQ2FwdGlvbkVsZW1lbnQiLCJlZGl0TmFtZUlucHV0IiwiZWRpdERlc2NyaXB0aW9uSW5wdXQiLCJpbWdMaW5rSW5wdXQiLCJjYXB0aW9uSW5wdXQiLCJlZGl0UHJvZmlsZUZvcm0iLCJuZXdQb3N0Rm9ybSIsImNhcmRUZW1wbGF0ZSIsImNhcmRzTGlzdCIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmROYW1lRWxlbWVudCIsImNhcmRJbWFnZUVsZW1lbnQiLCJjYXJkTGlrZUJ0biIsImNhcmREZWxldGVCdG4iLCJuYW1lIiwic3JjIiwibGluayIsImFsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0b2dnbGUiLCJvcGVuTW9kYWwiLCJoYW5kbGVFc2NhcGUiLCJldnQiLCJrZXkiLCJjbG9zZU1vZGFsIiwiaGFuZGxlT3ZlcmxheSIsInRhcmdldCIsImNvbnRhaW5zIiwibW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGFuZGxlU3VibWl0QnRuIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJidXR0b24iLCJwb3B1cCIsImNsb3Nlc3QiLCJyZXNldFZhbGlkYXRpb24iLCJ2YWx1ZSIsIkFycmF5IiwiZnJvbSIsInByZXZlbnREZWZhdWx0IiwicHJlcGVuZCIsInJlc2V0IiwiaXRlbSIsInNldEV2ZW50TGlzdG5lcnMiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTXNnIiwidmFsaWRhdGlvbk1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9