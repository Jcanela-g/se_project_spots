!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=(e,t,r)=>{const o=e.querySelector(`#${t.id}-error`);t.classList.remove(r.inputErrorClass),o.textContent=""},r=(e,t,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?o(t,r):(t.classList.remove(r.inactiveButtonClass),t.disabled=!1)},o=(e,t)=>{e.classList.add(t.inactiveButtonClass),e.disabled=!0};function n(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Save",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Saving...";e.textContent=t?o:r}const a=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}editUserInfo(e){let{name:t,about:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}addNewCard(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}toggleLikeBtn(e,t){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}editAvatarInfo(e){let{avatar:t}=e;return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"833151b4-3f94-4865-a6a7-7fdb64fe3173","Content-Type":"application/json"}});a.getAppInfo().then((e=>{let[t,r]=e;t.forEach((e=>{const t=D(e);A.prepend(t)})),d.textContent=r.name,u.textContent=r.about,m.src=r.avatar})).catch(console.error);const s=document.querySelector(".profile__edit-btn"),l=document.querySelector(".profile__new-btn"),i=document.querySelector(".modal__cancel-btn"),c=document.querySelector(".profile__avatar-btn"),d=document.querySelector(".profile__name"),u=document.querySelector(".profile__description"),m=document.querySelector(".profile__avatar"),_=document.querySelector("#edit-modal"),h=document.querySelector("#new-post-modal"),f=document.querySelector("#delete-confirm-modal"),v=document.querySelector("#preview-modal"),y=document.querySelector("#avatar-modal"),p=v.querySelector(".modal__image"),S=v.querySelector(".modal__caption"),b=_.querySelector("#profile-name-input"),q=_.querySelector("#profile-description-input"),E=h.querySelector("#img-link-input"),k=h.querySelector("#img-caption-input"),L=y.querySelector("#avatar-link-input"),g=_.querySelector(".modal__form"),C=h.querySelector(".modal__form"),$=f.querySelector("#delete-form"),j=y.querySelector("#avatar-edit"),U=document.querySelector("#card-template"),A=document.querySelector(".gallery__cards");let P,x;function D(e){const t=U.content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__description"),o=t.querySelector(".card__image"),n=t.querySelector(".card__like-btn"),s=t.querySelector(".card__delete-btn");return r.textContent=e.name,o.src=e.link,o.alt=e.name,e.isLiked&&n.classList.add("card__like-btn_liked"),n.addEventListener("click",(()=>{const t=n.classList.contains("card__like-btn_liked");a.toggleLikeBtn(e._id,t).then((e=>{n.classList.toggle("card__like-btn_liked")})).catch(console.error)})),s.addEventListener("click",(()=>function(e,t){P=e,x=t,B(f)}(t,e._id))),o.addEventListener("click",(()=>{B(v),p.src=e.link,S.textContent=e.name,p.alt=e.name})),t}function I(e){"Escape"===e.key&&T(document.querySelector(".modal_open"))}function w(e){e.target.classList.contains("modal_open")&&T(e.target)}function B(e){e.classList.add("modal_open"),e.addEventListener("mousedown",w),document.addEventListener("keyup",I)}function T(e){e.classList.remove("modal_open"),e.removeEventListener("mousedown",w),document.removeEventListener("keyup",I)}function N(t){const r=t.target.querySelector(".modal__submit-btn");o(r,e)}var O;$.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;n(t,!0,"Delete","Deleting..."),a.deleteCard(x).then((()=>{P&&(P.remove(),P=null),T(f)})).catch(console.error).finally((()=>{n(t,!1,"Delete","Deleting...")}))})),i.addEventListener("click",(()=>{T(f)})),document.querySelectorAll(".modal__close-btn").forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>T(t)))})),s.addEventListener("click",(()=>{var r,o;b.value=d.textContent,q.value=u.textContent,r=g,o=e,Array.from(r.querySelectorAll(o.inputSelector)).forEach((e=>{t(r,e,o)})),B(_)})),l.addEventListener("click",(()=>{B(h)})),c.addEventListener("click",(()=>{B(y)})),g.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;n(t,!0),a.editUserInfo({name:b.value,about:q.value}).then((t=>{d.textContent=t.name,u.textContent=t.about,N(e),T(_)})).catch(console.error).finally((()=>{n(t,!1)}))})),C.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;n(t,!0),a.addNewCard({name:k.value,link:E.value}).then((t=>{const r=D(t);A.prepend(r),N(e),T(h),e.target.reset()})).catch(console.error).finally((()=>{n(t,!1)}))})),j.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;n(t,!0),a.editAvatarInfo({avatar:L.value}).then((t=>{m.src=t.avatar,N(e),e.target.reset(),T(y)})).catch(console.error).finally((()=>{n(t,!1)}))})),O=e,Array.from(document.querySelectorAll(O.formSelector)).filter((e=>"delete-form"!==e.id)).forEach((e=>{((e,o)=>{const n=Array.from(e.querySelectorAll(o.inputSelector)),a=e.querySelector(o.submitButtonSelector);r(n,a,o),n.forEach((s=>{s.addEventListener("input",(function(){((e,r,o)=>{r.validity.valid?t(e,r,o):((e,t,r,o)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.add(o.inputErrorClass),n.textContent=r})(e,r,r.validationMessage,o)})(e,s,o),r(n,a,o)}))}))})(e,O)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQUEsTUFBTUEsRUFBVyxDQUNmQyxhQUFjLGVBQ2RDLGNBQWUsZ0JBQ2ZDLHFCQUFzQixxQkFDdEJDLG9CQUFxQiw2QkFDckJDLGdCQUFpQiwwQkFDakJDLFdBQVksd0JBU1JDLEVBQWlCQSxDQUFDQyxFQUFRQyxFQUFjQyxLQUM1QyxNQUFNQyxFQUFhSCxFQUFPSSxjQUFjLElBQUlILEVBQWFJLFlBQ3pESixFQUFhSyxVQUFVQyxPQUFPTCxFQUFPTCxpQkFDckNNLEVBQVdLLFlBQWMsRUFBRSxFQXNCdkJDLEVBQW9CQSxDQUFDQyxFQUFXQyxFQUFlVCxLQU43QlUsQ0FBQ0YsR0FDaEJBLEVBQVVHLE1BQU1aLElBQ2JBLEVBQWFhLFNBQVNDLFFBSzVCSCxDQUFnQkYsR0FDbEJNLEVBQWNMLEVBQWVULElBRTdCUyxFQUFjTCxVQUFVQyxPQUFPTCxFQUFPTixxQkFDdENlLEVBQWNNLFVBQVcsRUFDM0IsRUFHSUQsRUFBZ0JBLENBQUNMLEVBQWVULEtBQ3BDUyxFQUFjTCxVQUFVWSxJQUFJaEIsRUFBT04scUJBQ25DZSxFQUFjTSxVQUFXLENBQUksRUNuRHhCLFNBQVNFLEVBQ2RDLEVBQ0FDLEdBR0EsSUFGQUMsRUFBV0MsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBRyxPQUNkRyxFQUFXSCxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFHLFlBR1pILEVBQUlaLFlBREZhLEVBQ2dCSyxFQUVBSixDQUV0QixDQzBCQSxNQUFNSyxFQUFNLElDckNaLE1BQ0VDLFdBQUFBLENBQVdDLEdBQXVCLElBQXRCLFFBQUVDLEVBQU8sUUFBRUMsR0FBU0YsRUFDOUJHLEtBQUtDLFNBQVdILEVBQ2hCRSxLQUFLRSxTQUFXSCxDQUNsQixDQUVBSSxVQUFBQSxHQUNFLE9BQU9DLFFBQVFDLElBQUksQ0FBQ0wsS0FBS00sa0JBQW1CTixLQUFLTyxlQUNuRCxDQUVBRCxlQUFBQSxHQUNFLE9BQU9FLE1BQU0sR0FBR1IsS0FBS0MsaUJBQWtCLENBQ3JDRixRQUFTQyxLQUFLRSxXQUNiTyxNQUFNQyxHQUNIQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOUixRQUFRUyxPQUFPLFVBQVVILEVBQUlJLFdBRXhDLENBRUFQLFdBQUFBLEdBQ0UsT0FBT0MsTUFBTSxHQUFHUixLQUFLQyxvQkFBcUIsQ0FDeENGLFFBQVNDLEtBQUtFLFdBQ2JPLE1BQU1DLEdBQ0hBLEVBQUlDLEdBQ0NELEVBQUlFLE9BRU5SLFFBQVFTLE9BQU8sVUFBVUgsRUFBSUksV0FFeEMsQ0FFQUMsWUFBQUEsQ0FBWUMsR0FBa0IsSUFBakIsS0FBRUMsRUFBSSxNQUFFQyxHQUFPRixFQUMxQixPQUFPUixNQUFNLEdBQUdSLEtBQUtDLG9CQUFxQixDQUN4Q2tCLE9BQVEsUUFDUnBCLFFBQVNDLEtBQUtFLFNBQ2RrQixLQUFNQyxLQUFLQyxVQUFVLENBQ25CTCxPQUNBQyxZQUVEVCxNQUFNQyxHQUNIQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOUixRQUFRUyxPQUFPLFVBQVVILEVBQUlJLFdBRXhDLENBRUFTLFVBQUFBLENBQVVDLEdBQWlCLElBQWhCLEtBQUVQLEVBQUksS0FBRVEsR0FBTUQsRUFDdkIsT0FBT2hCLE1BQU0sR0FBR1IsS0FBS0MsaUJBQWtCLENBQ3JDa0IsT0FBUSxPQUNScEIsUUFBU0MsS0FBS0UsU0FDZGtCLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJMLE9BQ0FRLFdBRURoQixNQUFNQyxHQUNIQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOUixRQUFRUyxPQUFPLFVBQVVILEVBQUlJLFdBRXhDLENBRUFZLFVBQUFBLENBQVdDLEdBQ1QsT0FBT25CLE1BQU0sR0FBR1IsS0FBS0Msa0JBQWtCMEIsSUFBVSxDQUMvQ1IsT0FBUSxTQUNScEIsUUFBU0MsS0FBS0UsV0FDYk8sTUFBTUMsR0FDSEEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTlIsUUFBUVMsT0FBTyxVQUFVSCxFQUFJSSxXQUV4QyxDQUVBYyxhQUFBQSxDQUFjRCxFQUFRRSxHQUNwQixPQUFPckIsTUFBTSxHQUFHUixLQUFLQyxrQkFBa0IwQixVQUFnQixDQUNyRFIsT0FBUVUsRUFBVSxTQUFXLE1BQzdCOUIsUUFBU0MsS0FBS0UsV0FDYk8sTUFBTUMsR0FDSEEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTlIsUUFBUVMsT0FBTyxVQUFVSCxFQUFJSSxXQUV4QyxDQUVBZ0IsY0FBQUEsQ0FBY0MsR0FBYSxJQUFaLE9BQUVDLEdBQVFELEVBQ3ZCLE9BQU92QixNQUFNLEdBQUdSLEtBQUtDLDJCQUE0QixDQUMvQ2tCLE9BQVEsUUFDUnBCLFFBQVNDLEtBQUtFLFNBQ2RrQixLQUFNQyxLQUFLQyxVQUFVLENBQ25CVSxhQUVEdkIsTUFBTUMsR0FDSEEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTlIsUUFBUVMsT0FBTyxVQUFVSCxFQUFJSSxXQUV4QyxHRGhFa0IsQ0FDbEJoQixRQUFTLGtEQUNUQyxRQUFTLENBQ1BrQyxjQUFlLHVDQUNmLGVBQWdCLHNCQUlwQnRDLEVBQ0dRLGFBQ0FNLE1BQUtaLElBQXVCLElBQXJCcUMsRUFBT0MsR0FBU3RDLEVBQ3RCcUMsRUFBTUUsU0FBU0MsSUFDYixNQUFNQyxFQUFjQyxFQUFlRixHQUNuQ0csRUFBVUMsUUFBUUgsRUFBWSxJQUdoQ0ksRUFBWWxFLFlBQWMyRCxFQUFTbEIsS0FDbkMwQixFQUFtQm5FLFlBQWMyRCxFQUFTakIsTUFDMUMwQixFQUFjQyxJQUFNVixFQUFTSCxNQUFNLElBRXBDYyxNQUFNQyxRQUFRQyxPQUVqQixNQUFNQyxFQUFvQkMsU0FBUzlFLGNBQWMsc0JBQzNDK0UsRUFBZ0JELFNBQVM5RSxjQUFjLHFCQUN2Q2dGLEVBQWVGLFNBQVM5RSxjQUFjLHNCQUN0Q2lGLEVBQW1CSCxTQUFTOUUsY0FBYyx3QkFFMUNzRSxFQUFjUSxTQUFTOUUsY0FBYyxrQkFDckN1RSxFQUFxQk8sU0FBUzlFLGNBQWMseUJBQzVDd0UsRUFBZ0JNLFNBQVM5RSxjQUFjLG9CQUV2Q2tGLEVBQWNKLFNBQVM5RSxjQUFjLGVBQ3JDbUYsRUFBVUwsU0FBUzlFLGNBQWMsbUJBQ2pDb0YsRUFBa0JOLFNBQVM5RSxjQUFjLHlCQUN6Q3FGLEVBQWFQLFNBQVM5RSxjQUFjLGtCQUNwQ3NGLEVBQWNSLFNBQVM5RSxjQUFjLGlCQUVyQ3VGLEVBQXlCRixFQUFXckYsY0FBYyxpQkFDbER3RixFQUE2QkgsRUFBV3JGLGNBQWMsbUJBRXREeUYsRUFBZ0JQLEVBQVlsRixjQUFjLHVCQUMxQzBGLEVBQXVCUixFQUFZbEYsY0FDdkMsOEJBRUkyRixFQUFlUixFQUFRbkYsY0FBYyxtQkFDckM0RixFQUFlVCxFQUFRbkYsY0FBYyxzQkFDckM2RixFQUFrQlAsRUFBWXRGLGNBQWMsc0JBRTVDOEYsRUFBa0JaLEVBQVlsRixjQUFjLGdCQUM1QytGLEVBQWNaLEVBQVFuRixjQUFjLGdCQUNwQ2dHLEVBQWFaLEVBQWdCcEYsY0FBYyxnQkFDM0NpRyxFQUFhWCxFQUFZdEYsY0FBYyxnQkFFdkNrRyxFQUFlcEIsU0FBUzlFLGNBQWMsa0JBQ3RDb0UsRUFBWVUsU0FBUzlFLGNBQWMsbUJBRXpDLElBQUltRyxFQUNBQyxFQUVKLFNBQVNqQyxFQUFla0MsR0FDdEIsTUFBTW5DLEVBQWNnQyxFQUFhSSxRQUM5QnRHLGNBQWMsU0FDZHVHLFdBQVUsR0FFUEMsRUFBa0J0QyxFQUFZbEUsY0FBYyxzQkFDNUN5RyxFQUFtQnZDLEVBQVlsRSxjQUFjLGdCQUM3QzBHLEVBQWN4QyxFQUFZbEUsY0FBYyxtQkFDeEMyRyxFQUFnQnpDLEVBQVlsRSxjQUFjLHFCQXVDaEQsT0FyQ0F3RyxFQUFnQnBHLFlBQWNpRyxFQUFLeEQsS0FDbkM0RCxFQUFpQmhDLElBQU00QixFQUFLaEQsS0FDNUJvRCxFQUFpQkcsSUFBTVAsRUFBS3hELEtBRXhCd0QsRUFBSzVDLFNBQ1BpRCxFQUFZeEcsVUFBVVksSUFBSSx3QkFHNUI0RixFQUFZRyxpQkFBaUIsU0FBUyxLQUNwQyxNQUFNcEQsRUFBVWlELEVBQVl4RyxVQUFVNEcsU0FBUyx3QkFFL0N2RixFQUNHaUMsY0FBYzZDLEVBQUtVLElBQUt0RCxHQUN4QnBCLE1BQU0yRSxJQUNMTixFQUFZeEcsVUFBVStHLE9BQU8sdUJBQXVCLElBRXJEdkMsTUFBTUMsUUFBUUMsTUFBTSxJQVV6QitCLEVBQWNFLGlCQUFpQixTQUFTLElBUHhDLFNBQTBCM0MsRUFBYVgsR0FDckM0QyxFQUFlakMsRUFDZmtDLEVBQWlCN0MsRUFFakIyRCxFQUFVOUIsRUFDWixDQUdFK0IsQ0FBaUJqRCxFQUFhbUMsRUFBS1UsT0FHckNOLEVBQWlCSSxpQkFBaUIsU0FBUyxLQUN6Q0ssRUFBVTdCLEdBQ1ZFLEVBQXVCZCxJQUFNNEIsRUFBS2hELEtBQ2xDbUMsRUFBMkJwRixZQUFjaUcsRUFBS3hELEtBQzlDMEMsRUFBdUJxQixJQUFNUCxFQUFLeEQsSUFBSSxJQUdqQ3FCLENBQ1QsQ0F5QkEsU0FBU2tELEVBQWFDLEdBQ0osV0FBWkEsRUFBSUMsS0FFTkMsRUFEb0J6QyxTQUFTOUUsY0FBYyxlQUcvQyxDQUVBLFNBQVN3SCxFQUFjSCxHQUNqQkEsRUFBSUksT0FBT3ZILFVBQVU0RyxTQUFTLGVBQ2hDUyxFQUFXRixFQUFJSSxPQUVuQixDQUVBLFNBQVNQLEVBQVVRLEdBQ2pCQSxFQUFNeEgsVUFBVVksSUFBSSxjQUNwQjRHLEVBQU1iLGlCQUFpQixZQUFhVyxHQUNwQzFDLFNBQVMrQixpQkFBaUIsUUFBU08sRUFDckMsQ0FFQSxTQUFTRyxFQUFXRyxHQUNsQkEsRUFBTXhILFVBQVVDLE9BQU8sY0FDdkJ1SCxFQUFNQyxvQkFBb0IsWUFBYUgsR0FDdkMxQyxTQUFTNkMsb0JBQW9CLFFBQVNQLEVBQ3hDLENBZUEsU0FBU1EsRUFBZ0JQLEdBQ3ZCLE1BQU05RyxFQUFnQjhHLEVBQUlJLE9BQU96SCxjQUFjLHNCQUMvQ1ksRUFBY0wsRUFBZW5CLEVBQy9CLENGdkkwQlUsTUU0RjFCa0csRUFBV2EsaUJBQWlCLFVBckI1QixTQUE0QlEsR0FDMUJBLEVBQUlRLGlCQUVKLE1BQU1DLEVBQVlULEVBQUlVLFVBQ3RCaEgsRUFBYytHLEdBQVcsRUFBTSxTQUFVLGVBRXpDdkcsRUFDRytCLFdBQVc4QyxHQUNYL0QsTUFBSyxLQUNBOEQsSUFDRkEsRUFBYWhHLFNBQ2JnRyxFQUFlLE1BRWpCb0IsRUFBV25DLEVBQWdCLElBRTVCVixNQUFNQyxRQUFRQyxPQUNkb0QsU0FBUSxLQUNQakgsRUFBYytHLEdBQVcsRUFBTyxTQUFVLGNBQWMsR0FFOUQsSUE2QkE5QyxFQUFhNkIsaUJBQWlCLFNBQVMsS0FDckNVLEVBQVduQyxFQUFnQixJQUlSTixTQUFTbUQsaUJBQWlCLHFCQUVsQ2pFLFNBQVNrRSxJQUVwQixNQUFNQyxFQUFRRCxFQUFPRSxRQUFRLFVBQzdCRixFQUFPckIsaUJBQWlCLFNBQVMsSUFBTVUsRUFBV1ksSUFBTyxJQWlGM0R0RCxFQUFrQmdDLGlCQUFpQixTQUFTLEtGdk9wQndCLElBQUN6SSxFQUFRRSxFRXdPL0IyRixFQUFjNkMsTUFBUWhFLEVBQVlsRSxZQUNsQ3NGLEVBQXFCNEMsTUFBUS9ELEVBQW1CbkUsWUZ6T3pCUixFRTBPUGtHLEVGMU9laEcsRUUwT0VWLEVGek9mbUosTUFBTUMsS0FBSzVJLEVBQU9xSSxpQkFBaUJuSSxFQUFPUixnQkFDbEQwRSxTQUFTbkUsSUFDakJGLEVBQWVDLEVBQVFDLEVBQWNDLEVBQU8sSUV3TzlDb0gsRUFBVWhDLEVBQVksSUFHeEJILEVBQWM4QixpQkFBaUIsU0FBUyxLQUN0Q0ssRUFBVS9CLEVBQVEsSUFHcEJGLEVBQWlCNEIsaUJBQWlCLFNBQVMsS0FDekNLLEVBQVU1QixFQUFZLElBR3hCUSxFQUFnQmUsaUJBQWlCLFVBeEZqQyxTQUFpQ1EsR0FDL0JBLEVBQUlRLGlCQUVKLE1BQU1DLEVBQVlULEVBQUlVLFVBQ3RCaEgsRUFBYytHLEdBQVcsR0FFekJ2RyxFQUNHb0IsYUFBYSxDQUNaRSxLQUFNNEMsRUFBYzZDLE1BQ3BCeEYsTUFBTzRDLEVBQXFCNEMsUUFFN0JqRyxNQUFNZ0UsSUFDTC9CLEVBQVlsRSxZQUFjaUcsRUFBS3hELEtBQy9CMEIsRUFBbUJuRSxZQUFjaUcsRUFBS3ZELE1BRXRDOEUsRUFBZ0JQLEdBRWhCRSxFQUFXckMsRUFBWSxJQUV4QlIsTUFBTUMsUUFBUUMsT0FDZG9ELFNBQVEsS0FDUGpILEVBQWMrRyxHQUFXLEVBQU0sR0FFckMsSUFrRUEvQixFQUFZYyxpQkFBaUIsVUFoRTdCLFNBQWlDUSxHQUMvQkEsRUFBSVEsaUJBRUosTUFBTUMsRUFBWVQsRUFBSVUsVUFDdEJoSCxFQUFjK0csR0FBVyxHQUV6QnZHLEVBQ0c0QixXQUFXLENBQ1ZOLEtBQU0rQyxFQUFhMEMsTUFDbkJqRixLQUFNc0MsRUFBYTJDLFFBRXBCakcsTUFBTWdFLElBQ0wsTUFBTW5DLEVBQWNDLEVBQWVrQyxHQUNuQ2pDLEVBQVVDLFFBQVFILEdBRWxCMEQsRUFBZ0JQLEdBRWhCRSxFQUFXcEMsR0FDWGtDLEVBQUlJLE9BQU9nQixPQUFPLElBRW5CL0QsTUFBTUMsUUFBUUMsT0FDZG9ELFNBQVEsS0FDUGpILEVBQWMrRyxHQUFXLEVBQU0sR0FFckMsSUF5Q0E3QixFQUFXWSxpQkFBaUIsVUF2QzVCLFNBQTRCUSxHQUMxQkEsRUFBSVEsaUJBRUosTUFBTUMsRUFBWVQsRUFBSVUsVUFDdEJoSCxFQUFjK0csR0FBVyxHQUV6QnZHLEVBQ0dtQyxlQUFlLENBQUVFLE9BQVFpQyxFQUFnQnlDLFFBQ3pDakcsTUFBTWdFLElBQ0w3QixFQUFjQyxJQUFNNEIsRUFBS3pDLE9BRXpCZ0UsRUFBZ0JQLEdBRWhCQSxFQUFJSSxPQUFPZ0IsUUFDWGxCLEVBQVdqQyxFQUFZLElBRXhCWixNQUFNQyxRQUFRQyxPQUNkb0QsU0FBUSxLQUNQakgsRUFBYytHLEdBQVcsRUFBTSxHQUVyQyxJRmhOMEJoSSxFRXFPVFYsRUZwT0VtSixNQUFNQyxLQUFLMUQsU0FBU21ELGlCQUFpQm5JLEVBQU9ULGVBQzlCcUosUUFDNUI5SSxHQUF5QixnQkFBZEEsRUFBT0ssS0FHUCtELFNBQVNwRSxJQXBCQStJLEVBQUMvSSxFQUFRRSxLQUNoQyxNQUFNUSxFQUFZaUksTUFBTUMsS0FBSzVJLEVBQU9xSSxpQkFBaUJuSSxFQUFPUixnQkFDdERpQixFQUFnQlgsRUFBT0ksY0FBY0YsRUFBT1Asc0JBRWxEYyxFQUFrQkMsRUFBV0MsRUFBZVQsR0FFNUNRLEVBQVUwRCxTQUFTbkUsSUFDakJBLEVBQWFnSCxpQkFBaUIsU0FBUyxXQS9DaEIrQixFQUFDaEosRUFBUUMsRUFBY0MsS0FDM0NELEVBQWFhLFNBQVNDLE1BUXpCaEIsRUFBZUMsRUFBUUMsRUFBY0MsR0FyQmxCK0ksRUFBQ2pKLEVBQVFDLEVBQWNpSixFQUFVaEosS0FDdEQsTUFBTUMsRUFBYUgsRUFBT0ksY0FBYyxJQUFJSCxFQUFhSSxZQUN6REosRUFBYUssVUFBVVksSUFBSWhCLEVBQU9MLGlCQUNsQ00sRUFBV0ssWUFBYzBJLENBQVEsRUFXL0JELENBQ0VqSixFQUNBQyxFQUNBQSxFQUFha0osa0JBQ2JqSixFQUlKLEVBc0NJOEksQ0FBbUJoSixFQUFRQyxFQUFjQyxHQUN6Q08sRUFBa0JDLEVBQVdDLEVBQWVULEVBQzlDLEdBQUUsR0FDRixFQVVBNkksQ0FBaUIvSSxFQUFRRSxFQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3V0aWxzL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3V0aWxzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnRuXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idG5faW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbGVtZW50LCBlcnJvck1zZywgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IGVycm9yTXNnO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yTXNnRWwudGV4dENvbnRlbnQgPSBcIlwiO1xufTtcblxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihcbiAgICAgIGZvcm1FbCxcbiAgICAgIGlucHV0RWxlbWVudCxcbiAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QsIGNvbmZpZykgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxufTtcblxuY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG59O1xuXG5jb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0bmVycyA9IChmb3JtRWwsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWwucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsLCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBjb25zdCBmaWx0ZXJlZEZvcm1zID0gZm9ybUxpc3QuZmlsdGVyKFxuICAgIChmb3JtRWwpID0+IGZvcm1FbC5pZCAhPT0gXCJkZWxldGUtZm9ybVwiXG4gICk7XG5cbiAgZmlsdGVyZWRGb3Jtcy5mb3JFYWNoKChmb3JtRWwpID0+IHtcbiAgICBzZXRFdmVudExpc3RuZXJzKGZvcm1FbCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgeyByZXNldFZhbGlkYXRpb24sIGVuYWJsZVZhbGlkYXRpb24sIGRpc2FibGVCdXR0b24sIHNldHRpbmdzIH07XG4iLCJleHBvcnQgZnVuY3Rpb24gc2V0QnV0dG9uVGV4dChcbiAgYnRuLFxuICBpc0xvYWRpbmcsXG4gIGRlZmF1bHRUZXh0ID0gXCJTYXZlXCIsXG4gIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIlxuKSB7XG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICBidG4udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcbiAgfSBlbHNlIHtcbiAgICBidG4udGV4dENvbnRlbnQgPSBkZWZhdWx0VGV4dDtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIHJlc2V0VmFsaWRhdGlvbixcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgZGlzYWJsZUJ1dHRvbixcbiAgc2V0dGluZ3MsXG59IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuaW1wb3J0IHsgc2V0QnV0dG9uVGV4dCB9IGZyb20gXCIuLi91dGlscy9oZWxwZXJzLmpzXCI7XG5cbi8vIGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbi8vICAge1xuLy8gICAgIG5hbWU6IFwiVmFsIFRob3JlbnNcIixcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4vLyAgIH0sXG4vLyAgIHtcbi8vICAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXG4vLyAgIH0sXG4vLyAgIHtcbi8vICAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCIsXG4vLyAgIH0sXG4vLyAgIHtcbi8vICAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcbi8vICAgfSxcbi8vICAge1xuLy8gICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy81LXBob3RvLWJ5LXZhbi1hbmgtbmd1eWVuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuLy8gICB9LFxuLy8gICB7XG4vLyAgICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbi8vICAgfSxcbi8vIF07XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjgzMzE1MWI0LTNmOTQtNDg2NS1hNmE3LTdmZGI2NGZlMzE3M1wiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmFwaVxuICAuZ2V0QXBwSW5mbygpXG4gIC50aGVuKChbY2FyZHMsIHVzZXJJbmZvXSkgPT4ge1xuICAgIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZCk7XG4gICAgICBjYXJkc0xpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gICAgfSk7XG5cbiAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHVzZXJJbmZvLm5hbWU7XG4gICAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdXNlckluZm8uYWJvdXQ7XG4gICAgcHJvZmlsZUF2YXRhci5zcmMgPSB1c2VySW5mby5hdmF0YXI7XG4gIH0pXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKTtcblxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuY29uc3QgbmV3UG9zdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmV3LWJ0blwiKTtcbmNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhbmNlbC1idG5cIik7XG5jb25zdCBhdmF0YXJFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnRuXCIpO1xuXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5cbmNvbnN0IGVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xuY29uc3QgbmV3UG9zdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtbW9kYWxcIik7XG5jb25zdCBjb25maXJtRGVsZXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1jb25maXJtLW1vZGFsXCIpO1xuY29uc3QgcHJldmlld0ltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IGF2YXRhck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItbW9kYWxcIik7XG5cbmNvbnN0IHByZXZpZXdNb2RhbEltZ0VsZW1lbnQgPSBwcmV2aWV3SW1nLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuY29uc3QgcHJldmlld01vZGFsQ2FwdGlvbkVsZW1lbnQgPSBwcmV2aWV3SW1nLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5cbmNvbnN0IGVkaXROYW1lSW5wdXQgPSBlZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZS1pbnB1dFwiKTtcbmNvbnN0IGVkaXREZXNjcmlwdGlvbklucHV0ID0gZWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuY29uc3QgaW1nTGlua0lucHV0ID0gbmV3UG9zdC5xdWVyeVNlbGVjdG9yKFwiI2ltZy1saW5rLWlucHV0XCIpO1xuY29uc3QgY2FwdGlvbklucHV0ID0gbmV3UG9zdC5xdWVyeVNlbGVjdG9yKFwiI2ltZy1jYXB0aW9uLWlucHV0XCIpO1xuY29uc3QgYXZhdGFyTGlua0lucHV0ID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItbGluay1pbnB1dFwiKTtcblxuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IG5ld1Bvc3RGb3JtID0gbmV3UG9zdC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgZGVsZXRlRm9ybSA9IGNvbmZpcm1EZWxldGlvbi5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1mb3JtXCIpO1xuY29uc3QgYXZhdGFyRm9ybSA9IGF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLWVkaXRcIik7XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY2FyZHNcIik7XG5cbmxldCBzZWxlY3RlZENhcmQ7XG5sZXQgc2VsZWN0ZWRDYXJkSWQ7XG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gIGNvbnN0IGNhcmROYW1lRWxlbWVudCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVzY3JpcHRpb25cIik7XG4gIGNvbnN0IGNhcmRJbWFnZUVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XG4gIGNvbnN0IGNhcmREZWxldGVCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIik7XG5cbiAgY2FyZE5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICBjYXJkSW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEubGluaztcbiAgY2FyZEltYWdlRWxlbWVudC5hbHQgPSBkYXRhLm5hbWU7XG5cbiAgaWYgKGRhdGEuaXNMaWtlZCkge1xuICAgIGNhcmRMaWtlQnRuLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKTtcbiAgfVxuXG4gIGNhcmRMaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc3QgaXNMaWtlZCA9IGNhcmRMaWtlQnRuLmNsYXNzTGlzdC5jb250YWlucyhcImNhcmRfX2xpa2UtYnRuX2xpa2VkXCIpO1xuXG4gICAgYXBpXG4gICAgICAudG9nZ2xlTGlrZUJ0bihkYXRhLl9pZCwgaXNMaWtlZClcbiAgICAgIC50aGVuKCh1cGRhdGVkQ2FyZCkgPT4ge1xuICAgICAgICBjYXJkTGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICB9KTtcblxuICBmdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkKGNhcmRFbGVtZW50LCBjYXJkSWQpIHtcbiAgICBzZWxlY3RlZENhcmQgPSBjYXJkRWxlbWVudDtcbiAgICBzZWxlY3RlZENhcmRJZCA9IGNhcmRJZDtcblxuICAgIG9wZW5Nb2RhbChjb25maXJtRGVsZXRpb24pO1xuICB9XG5cbiAgY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICBoYW5kbGVEZWxldGVDYXJkKGNhcmRFbGVtZW50LCBkYXRhLl9pZClcbiAgKTtcblxuICBjYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgb3Blbk1vZGFsKHByZXZpZXdJbWcpO1xuICAgIHByZXZpZXdNb2RhbEltZ0VsZW1lbnQuc3JjID0gZGF0YS5saW5rO1xuICAgIHByZXZpZXdNb2RhbENhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHByZXZpZXdNb2RhbEltZ0VsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qgc3VibWl0QnRuID0gZXZ0LnN1Ym1pdHRlcjtcbiAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIHRydWUsIFwiRGVsZXRlXCIsIFwiRGVsZXRpbmcuLi5cIik7XG5cbiAgYXBpXG4gICAgLmRlbGV0ZUNhcmQoc2VsZWN0ZWRDYXJkSWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgaWYgKHNlbGVjdGVkQ2FyZCkge1xuICAgICAgICBzZWxlY3RlZENhcmQucmVtb3ZlKCk7XG4gICAgICAgIHNlbGVjdGVkQ2FyZCA9IG51bGw7XG4gICAgICB9XG4gICAgICBjbG9zZU1vZGFsKGNvbmZpcm1EZWxldGlvbik7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzZXRCdXR0b25UZXh0KHN1Ym1pdEJ0biwgZmFsc2UsIFwiRGVsZXRlXCIsIFwiRGVsZXRpbmcuLi5cIik7XG4gICAgfSk7XG59XG5cbmRlbGV0ZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVEZWxldGVTdWJtaXQpO1xuXG5mdW5jdGlvbiBoYW5kbGVFc2NhcGUoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3QgYWN0aXZlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5cIik7XG4gICAgY2xvc2VNb2RhbChhY3RpdmVQb3B1cCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlT3ZlcmxheShldnQpIHtcbiAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlblwiKSkge1xuICAgIGNsb3NlTW9kYWwoZXZ0LnRhcmdldCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuXCIpO1xuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZU92ZXJsYXkpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgaGFuZGxlRXNjYXBlKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcbiAgbW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVPdmVybGF5KTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGhhbmRsZUVzY2FwZSk7XG59XG5cbmNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKGNvbmZpcm1EZWxldGlvbik7XG59KTtcblxuLy8gRmluZCBhbGwgY2xvc2UgYnV0dG9uc1xuY29uc3QgY2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuXG5jbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gIC8vIEZpbmQgdGhlIGNsb3Nlc3QgcG9wdXAgb25seSBvbmNlXG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChwb3B1cCkpO1xufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEJ0bihldnQpIHtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGV2dC50YXJnZXQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcbiAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBzZXR0aW5ncyk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCBzdWJtaXRCdG4gPSBldnQuc3VibWl0dGVyO1xuICBzZXRCdXR0b25UZXh0KHN1Ym1pdEJ0biwgdHJ1ZSk7XG5cbiAgYXBpXG4gICAgLmVkaXRVc2VySW5mbyh7XG4gICAgICBuYW1lOiBlZGl0TmFtZUlucHV0LnZhbHVlLFxuICAgICAgYWJvdXQ6IGVkaXREZXNjcmlwdGlvbklucHV0LnZhbHVlLFxuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcblxuICAgICAgaGFuZGxlU3VibWl0QnRuKGV2dCk7XG5cbiAgICAgIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGUpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgc2V0QnV0dG9uVGV4dChzdWJtaXRCdG4sIGZhbHNlKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTmV3UG9zdEZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGV2dC5zdWJtaXR0ZXI7XG4gIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCB0cnVlKTtcblxuICBhcGlcbiAgICAuYWRkTmV3Q2FyZCh7XG4gICAgICBuYW1lOiBjYXB0aW9uSW5wdXQudmFsdWUsXG4gICAgICBsaW5rOiBpbWdMaW5rSW5wdXQudmFsdWUsXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChkYXRhKTtcbiAgICAgIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcblxuICAgICAgaGFuZGxlU3VibWl0QnRuKGV2dCk7XG5cbiAgICAgIGNsb3NlTW9kYWwobmV3UG9zdCk7XG4gICAgICBldnQudGFyZ2V0LnJlc2V0KCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzZXRCdXR0b25UZXh0KHN1Ym1pdEJ0biwgZmFsc2UpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IHN1Ym1pdEJ0biA9IGV2dC5zdWJtaXR0ZXI7XG4gIHNldEJ1dHRvblRleHQoc3VibWl0QnRuLCB0cnVlKTtcblxuICBhcGlcbiAgICAuZWRpdEF2YXRhckluZm8oeyBhdmF0YXI6IGF2YXRhckxpbmtJbnB1dC52YWx1ZSB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBwcm9maWxlQXZhdGFyLnNyYyA9IGRhdGEuYXZhdGFyO1xuXG4gICAgICBoYW5kbGVTdWJtaXRCdG4oZXZ0KTtcblxuICAgICAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICAgICAgY2xvc2VNb2RhbChhdmF0YXJNb2RhbCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzZXRCdXR0b25UZXh0KHN1Ym1pdEJ0biwgZmFsc2UpO1xuICAgIH0pO1xufVxuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0TmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XG4gIGVkaXREZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICByZXNldFZhbGlkYXRpb24oZWRpdFByb2ZpbGVGb3JtLCBzZXR0aW5ncyk7XG4gIG9wZW5Nb2RhbChlZGl0UHJvZmlsZSk7XG59KTtcblxubmV3UG9zdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwobmV3UG9zdCk7XG59KTtcblxuYXZhdGFyRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwoYXZhdGFyTW9kYWwpO1xufSk7XG5cbmVkaXRQcm9maWxlRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbm5ld1Bvc3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlTmV3UG9zdEZvcm1TdWJtaXQpO1xuYXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUF2YXRhclN1Ym1pdCk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEFwcEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIHRvZ2dsZUxpa2VCdG4oY2FyZElkLCBpc0xpa2VkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBlZGl0QXZhdGFySW5mbyh7IGF2YXRhciB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwaTtcbiJdLCJuYW1lcyI6WyJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWwiLCJpbnB1dEVsZW1lbnQiLCJjb25maWciLCJlcnJvck1zZ0VsIiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsZW1lbnQiLCJoYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsImFkZCIsInNldEJ1dHRvblRleHQiLCJidG4iLCJpc0xvYWRpbmciLCJkZWZhdWx0VGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImxvYWRpbmdUZXh0IiwiYXBpIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiYmFzZVVybCIsImhlYWRlcnMiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImdldEFwcEluZm8iLCJQcm9taXNlIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJyZWplY3QiLCJzdGF0dXMiLCJlZGl0VXNlckluZm8iLCJfcmVmMiIsIm5hbWUiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkTmV3Q2FyZCIsIl9yZWYzIiwibGluayIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJ0b2dnbGVMaWtlQnRuIiwiaXNMaWtlZCIsImVkaXRBdmF0YXJJbmZvIiwiX3JlZjQiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwiY2FyZHMiLCJ1c2VySW5mbyIsImZvckVhY2giLCJjYXJkIiwiY2FyZEVsZW1lbnQiLCJnZXRDYXJkRWxlbWVudCIsImNhcmRzTGlzdCIsInByZXBlbmQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVBdmF0YXIiLCJzcmMiLCJjYXRjaCIsImNvbnNvbGUiLCJlcnJvciIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZG9jdW1lbnQiLCJuZXdQb3N0QnV0dG9uIiwiY2FuY2VsQnV0dG9uIiwiYXZhdGFyRWRpdEJ1dHRvbiIsImVkaXRQcm9maWxlIiwibmV3UG9zdCIsImNvbmZpcm1EZWxldGlvbiIsInByZXZpZXdJbWciLCJhdmF0YXJNb2RhbCIsInByZXZpZXdNb2RhbEltZ0VsZW1lbnQiLCJwcmV2aWV3TW9kYWxDYXB0aW9uRWxlbWVudCIsImVkaXROYW1lSW5wdXQiLCJlZGl0RGVzY3JpcHRpb25JbnB1dCIsImltZ0xpbmtJbnB1dCIsImNhcHRpb25JbnB1dCIsImF2YXRhckxpbmtJbnB1dCIsImVkaXRQcm9maWxlRm9ybSIsIm5ld1Bvc3RGb3JtIiwiZGVsZXRlRm9ybSIsImF2YXRhckZvcm0iLCJjYXJkVGVtcGxhdGUiLCJzZWxlY3RlZENhcmQiLCJzZWxlY3RlZENhcmRJZCIsImRhdGEiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZE5hbWVFbGVtZW50IiwiY2FyZEltYWdlRWxlbWVudCIsImNhcmRMaWtlQnRuIiwiY2FyZERlbGV0ZUJ0biIsImFsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb250YWlucyIsIl9pZCIsInVwZGF0ZWRDYXJkIiwidG9nZ2xlIiwib3Blbk1vZGFsIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImhhbmRsZUVzY2FwZSIsImV2dCIsImtleSIsImNsb3NlTW9kYWwiLCJoYW5kbGVPdmVybGF5IiwidGFyZ2V0IiwibW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGFuZGxlU3VibWl0QnRuIiwicHJldmVudERlZmF1bHQiLCJzdWJtaXRCdG4iLCJzdWJtaXR0ZXIiLCJmaW5hbGx5IiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbiIsInBvcHVwIiwiY2xvc2VzdCIsInJlc2V0VmFsaWRhdGlvbiIsInZhbHVlIiwiQXJyYXkiLCJmcm9tIiwicmVzZXQiLCJmaWx0ZXIiLCJzZXRFdmVudExpc3RuZXJzIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1zZyIsInZhbGlkYXRpb25NZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==